/*\n* Ø¥Ø¶Ø§ÙØ©: GPT Online\n* ÙˆØµÙ: ØªØªÙŠØ­ Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ù†Ù…ÙˆØ°Ø¬ Ù„ØºÙˆÙŠ ÙƒØ¨ÙŠØ± (GPT) Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª.\n* Ø§Ù„Ù…ØªØ±Ø¬Ù… ÙˆØ§Ù„Ù…Ø¹Ø¯Ù„: Hilman\n*/\n\nimport axios from 'axios';\nimport FormData from 'form-data';\n\nasync function gptOnline(message) {\n  const referer = 'https://gptonline.ai/ar/chatgpt-online/';\n\n  try {\n    const { data: html } = await axios.get(referer);\n    const attrs = {}\n    const attrList = ['nonce', 'post-id', 'bot-id', 'url'];\n\n    for (const key of attrList) {\n      const match = html.match(new RegExp(`data-${key}=\"([^\"]+)\"`));\n      if (!match) throw new Error(`Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: ${key}. Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ù‚Ø¯ ØªØºÙŠØ±Øª.`);\n      attrs[key] = match[1];\n    }\n\n    const form = new FormData();\n    const clientId = 'sU' + Math.random().toString(36).slice(2, 10);\n\n    form.append('_wpnonce', attrs['nonce']);\n    form.append('post_id', attrs['post-id']);\n    form.append('url', attrs['url']);\n    form.append('action', 'wpaicg_chat_shortcode_message');\n    form.append('message', message);\n    form.append('bot_id', attrs['bot-id']);\n    form.append('chatbot_identity', `custom_bot_${attrs['bot-id']}`);\n    form.append('wpaicg_chat_history', JSON.stringify([{ role: 'user', content: message }]));\n    form.append('wpaicg_chat_client_id', clientId);\n\n    const { data: responseData } = await axios.post(\n      'https://gptonline.ai/ar/wp-admin/admin-ajax.php',\n      form,\n      {\n        headers: {\n          ...form.getHeaders(),\n          Referer: referer,\n          Origin: 'https://gptonline.ai',\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36',\n        }\n      }\n    );\n\n    return responseData.data || 'âŒ Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø£ÙŠ Ø±Ø¯ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.';\n  } catch (err) {\n    console.error(err); // Log the full error for debugging\n    throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø¯Ù…Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.');\n  }\n}\n\nconst handler = async (m, { text, usedPrefix, command }) => {\n  if (!text) {\n    return m.reply(`*ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ.*\n*Ù…Ø«Ø§Ù„:* ${usedPrefix + command} Ù…Ø§ Ù‡ÙŠ ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ`);\n  }\n\n  await m.react('â³');\n\n  try {\n    const result = await gptOnline(text);\n    const formattedResult = `\n*ã€Œ ğŸ¤– GPT Online ã€*\n\n${result}\n        `.trim();\n\n    await m.reply(formattedResult);\n    await m.react('âœ…');\n\n  } catch (error) {\n    await m.react('âŒ');\n    m.reply(`*Ø®Ø·Ø£:* ${error.message}`);\n  }\n};\n\nhandler.help = ['gpt <question>', 'Ø¬ÙŠ-Ø¨ÙŠ-ØªÙŠ <Ø³Ø¤Ø§Ù„>'];\nhandler.tags = ['ai'];\nhandler.command = /^(gptonline|gpt|Ø¬ÙŠ-Ø¨ÙŠ-ØªÙŠ)$/i;\nhandler.limit = true;\nhandler.register = true;\n\nexport default handler;\n